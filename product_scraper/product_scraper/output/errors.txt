2019-09-23 21:06:01 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/blown-a-ouai-noir-set-P436409?icid2=products%20grid:p436409> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:01 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/powerlift-microcurrent-facial-fit-collection-P429664?icid2=products%20grid:p429664> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:02 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/super-straight-up-bundle-P442582?icid2=products%20grid:p442582> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:06 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/sk-ii-hydrating-essence-set-P444043?icid2=products%20grid:p444043> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:09 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/signature-set-P434324?icid2=products%20grid:p434324> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:09 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/bel-azur-set-P434322?icid2=products%20grid:p434322> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:10 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/true-giving-truth-serum-P423267?icid2=products%20grid:p423267> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:11 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/target-lines-day-night-set-P442991?icid2=products%20grid:p442991> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:11 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/laser-polish-kit-P444152?icid2=products%20grid:p444152> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:13 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/secrets-algae-kit-P436142?icid2=products%20grid:p436142> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:13 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/love-story-gift-set-P428262?icid2=products%20grid:p428262> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:14 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/me-time-tea-time-P440470?icid2=products%20grid:p440470> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:14 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/prada-luna-rossa-black-gift-set-P445810?icid2=products%20grid:p445810> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:14 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/pitera-fek-limited-edition-confetti-kit-P443380?icid2=products%20grid:p443380> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:15 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/premier-cru-eye-set-P442967?icid2=products%20grid:p442967> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:16 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/thickening-jumbos-set-P443578?icid2=products%20grid:p443578> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:16 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/polo-blue-3-pc-set-P442935?icid2=products%20grid:p442935> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:17 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/let-there-be-light-P437680?icid2=products%20grid:p437680> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:19 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/fleur-de-rose-spring-set-P417355?icid2=products%20grid:p417355> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:19 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/scalp-revival-scalp-therapy-essentials-kit-P429960?icid2=products%20grid:p429960> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:21 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/it-s-your-skincare-power-pair-best-selling-moisturizer-eye-cream-duo-P443387?icid2=products%20grid:p443387> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:22 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/instant-brightening-heros-P442966?icid2=products%20grid:p442966> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:22 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/sayiloveyou-microdermabrasion-pore-refiner-primer-bundle-P435208?icid2=products%20grid:p435208> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:23 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/flawless-five-P434348?icid2=products%20grid:p434348> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:23 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/les-basics-set-P443554?icid2=products%20grid:p443554> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:23 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/mon-paris-eau-de-parfum-gift-set-P442729?icid2=products%20grid:p442729> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:27 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/prep-perfect-skin-long-wear-customizable-set-P445416?icid2=products%20grid:p445416> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:28 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/advanced-genifique-eye-bonus-set-P443382?icid2=products%20grid:p443382> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:29 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/love-like-saint-set-P440630?icid2=products%20grid:p440630> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:30 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/caviar-anti-aging-r-replenishing-moisture-essentials-P442802?icid2=products%20grid:p442802> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:31 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/a-rosy-outlook-P443826?icid2=products%20grid:p443826> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:32 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/bestsellers-set-P420977?icid2=products%20grid:p420977> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:33 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/the-power-hydration-P435811?icid2=products%20grid:p435811> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:34 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/hot-nights-face-palette-P444002?icid2=products%20grid:p444002> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:34 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/skin-brightening-discovery-set-P442562?icid2=products%20grid:p442562> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:40 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/bod-squad-set-P444982?icid2=products%20grid:p444982> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:40 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/bi-facil-home-away-set-P444049?icid2=products%20grid:p444049> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:40 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/get-drenched-P436115?icid2=products%20grid:p436115> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:41 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/deluxe-replica-set-P426359?icid2=products%20grid:p426359> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:41 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/essentials-set-P436285?icid2=products%20grid:p436285> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:42 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/radiant-floral-set-P436286?icid2=products%20grid:p436286> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:45 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/the-jack-all-trades-P436137?icid2=products%20grid:p436137> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:49 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/pumpkin-chai-reed-diffuser-P421221?icid2=products%20grid:p421221> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:52 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/sunkissed-glow-kit-P444929?icid2=products%20grid:p444929> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:52 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/cleansing-clarifying-duo-P438361?icid2=products%20grid:p438361> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:53 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/new-day-nude-you-P440808?icid2=products%20grid:p440808> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:54 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/samba-mama-coco-cabana-trio-P443374?icid2=products%20grid:p443374> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:06:59 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/avocado-sleep-set-P440480?icid2=products%20grid:p440480> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:00 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/sugar-lip-prep-n-paint-P424611?icid2=products%20grid:p424611> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:00 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/eye-candy-set-P442925?icid2=products%20grid:p442925> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:01 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/it-s-glow-fest-P444464?icid2=products%20grid:p444464> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:02 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/starlight-sparkle-dual-finish-highlighter-palette-P436841?icid2=products%20grid:p436841> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:03 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/hair-holy-grails-summer-essentials-P445437?icid2=products%20grid:p445437> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:04 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/holiday-glow-skincare-set-P424613?icid2=products%20grid:p424613> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:04 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/skin-dreamzzz-P440443?icid2=products%20grid:p440443> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:05 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/shades-cool-gel-lab-pro-set-P441861?icid2=products%20grid:p441861> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:06 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/advanced-genifique-youth-activating-starter-kit-P440303?icid2=products%20grid:p440303> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:06 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/stay-all-day-waterproof-liquid-eye-liner-micro-waterproof-liquid-eye-liner-duo-P446615?icid2=products%20grid:p446615> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:08 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/cleanbiotic-pore-refiner-primer-bundle-P444717?icid2=products%20grid:p444717> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:09 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/bonjour-hydration-set-P444462?icid2=products%20grid:p444462> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:10 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/vanille-abricot-vanille-coco-travel-spray-layering-duo-P423551?icid2=products%20grid:p423551> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:13 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/diorshow-iconic-overcurl-catwalk-spectacular-makeup-look-set-P441308?icid2=products%20grid:p441308> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:14 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/acne-clear-control-30-day-kit-P433458?icid2=products%20grid:p433458> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:15 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/the-sweet-life-P440811?icid2=products%20grid:p440811> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:15 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/wear-your-pride-set-P445710?icid2=products%20grid:p445710> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:15 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/glow-for-it-P436326?icid2=products%20grid:p436326> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:16 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/flight-club-dry-shampoo-travel-set-P428820?icid2=products%20grid:p428820> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:16 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/mermaid-shine-metallic-seaglass-eyeshadow-set-P436403?icid2=products%20grid:p436403> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:17 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/crystal-mini-trio-P430177?icid2=products%20grid:p430177> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:18 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/metallic-eye-lip-crayon-P78731877?icid2=products%20grid:p78731877> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 257, in parse_sephora
    shared_product_details['attributes'][product['variationType']] = [(obj.get('variationValue', '') + ' ' + obj.get('variationDesc', '')) for obj in product['regularChildSkus'] if obj['variationType'] == product['variationType']]
KeyError: 'regularChildSkus'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:22 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/caviar-anti-aging-r-multiplying-volume-trial-kit-P436724?icid2=products%20grid:p436724> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:24 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/saint-sinner-mini-set-P434332?icid2=products%20grid:p434332> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:26 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/pore-care-trial-kit-P431514?icid2=products%20grid:p431514> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:27 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/all-nighter-setting-spray-eyeshadow-primer-set-P442721?icid2=products%20grid:p442721> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:29 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/bestsellers-lip-essentials-set-P440506?icid2=products%20grid:p440506> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:29 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/frosted-metal-lipstick-P09784333?icid2=products%20grid:p09784333> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 257, in parse_sephora
    shared_product_details['attributes'][product['variationType']] = [(obj.get('variationValue', '') + ' ' + obj.get('variationDesc', '')) for obj in product['regularChildSkus'] if obj['variationType'] == product['variationType']]
KeyError: 'regularChildSkus'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:32 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/the-easy-ouai-kit-P443758?icid2=products%20grid:p443758> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:32 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/hydrating-trial-kit-P431513?icid2=products%20grid:p431513> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:36 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/brow-raising-lineup-P440960?icid2=products%20grid:p440960> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:36 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/a-fresh-clean-start-P440810?icid2=products%20grid:p440810> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:38 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/pick-me-up-pinks-P440807?icid2=products%20grid:p440807> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:44 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/sample-set-P433170?icid2=products%20grid:p433170> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 259, in parse_sephora
    sephora_category_list = self.recursive_sephora_category_builder(product['parentCategory'])
KeyError: 'parentCategory'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:45 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/holiday-scented-candle-ornament-P423189?icid2=products%20grid:p423189> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:47 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/play-by-sephora-your-beauty-future-P444906?icid2=products%20grid:p444906> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:47 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/play-by-sephora-cheers-to-beauty-P444905?icid2=products%20grid:p444905> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
2019-09-23 21:07:48 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/scary-good-beauty-foundations-P446461?skuId=2219335&icid2=products%20grid:p446461> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 276, in parse_sephora
    raise Exception(e)
Exception: list index out of range
2019-09-23 21:07:48 [scrapy.core.scraper] ERROR: Spider error processing <GET https://www.sephora.com/product/play-by-sephora-lovestruck-beauty-P444907?icid2=products%20grid:p444907> (referer: None)
Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 229, in parse_sephora
    json_dump = hxs.select('//script[contains(@id, "linkJSON")]/text()').extract()[0]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/utils/defer.py", line 102, in iter_errback
    yield next(it)
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/offsite.py", line 29, in process_spider_output
    for x in result:
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/middlewares.py", line 35, in process_spider_output
    for i in result:
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/referer.py", line 339, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/urllength.py", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/venv/lib/python3.7/site-packages/scrapy/spidermiddlewares/depth.py", line 58, in <genexpr>
    return (r for r in result or () if _filter(r))
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/spiders/products.py", line 23, in parse
    loaders = self.productItemLoader.parse_sephora(product_url=request_url, html_dump=response)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 275, in parse_sephora
    self.unpublish_product(product_url)
  File "/CodeForLyf/qarece-web-crawler/product_scraper/product_scraper/itemloaders.py", line 441, in unpublish_product
    id_from_url = urlparse.parse_qs(parsed.query)['skuid'] # Using lowercase key cause the parse turns everything to lowercase
KeyError: 'skuid'
